\usepackage[cp1251]{inputenc}
\usepackage{cmap}
\usepackage[T1,T2A]{fontenc}
\usepackage[english,russian]{babel}
\usepackage{upgreek}
\usepackage{amssymb,amsmath,mathrsfs}
\usepackage{array}
\usepackage{theorem}
\usepackage{ifthen}
\usepackage[ruled,section]{algorithm}
\usepackage[noend]{algorithmic}
\usepackage{graphicx}
\usepackage{floatflt}
%\usepackage[footnotesize]{caption2}
\usepackage{color}
\usepackage[colorlinks=true, citecolor=blue, urlcolor=cyan]{hyperref}
\usepackage[all]{xy}
\usepackage{epstopdf}
\usepackage{tikz}
\usepackage{pgfplots}
\usepackage{multicol}
\usepackage{multirow}
\usepackage{subfig}
\usepackage[toc,page]{appendix}

% Параметры страницы
\textheight=24cm
\textwidth=16cm
\oddsidemargin=0mm
\topmargin=-1cm
\parindent=24pt
\tolerance=500
\footnotesep=3ex
\flushbottom
\tolerance=3000
\renewcommand{\baselinestretch}{1.4} %для печати с большим интервалом

\let\varvec\vec
%\renewcommand{\vec}[1]{\mathbf{#1}}
\renewcommand{\vec}[1]{\boldsymbol{#1}}

% Окружения типа теорем
\theorembodyfont{\rmfamily\slshape}
\theoremstyle{plain}
\newtheorem{Theorem}{Теорема}[section]
\newtheorem{Corollary}{Следствие}[Theorem]
\newtheorem{Lemma}{Лемма}[section]
\newtheorem{Def}{Определение}[section]
\newtheorem{State}{Утверждение}[section]
\newtheorem{Hypothesis}{Гипотеза}[section]
\theorembodyfont{\rmfamily}
\newtheorem{Example}{Пример}[section]
\newtheorem{Heuristic}{Эвристика}
\newtheorem{Remark}{Замечание}[section]
% Шаманские пляски с бубном, чтобы ставить точку после номера теоремы
\gdef\th@plain{\normalfont
    \def\@begintheorem##1##2{%
        \item[\hskip\labelsep\theorem@headerfont ##1\ ##2.\;]}%
    \def\@opargbegintheorem##1##2##3{%
        \item[\hskip\labelsep\theorem@headerfont ##1\ ##2 (##3).\;]}%
}

\newenvironment{Proof}%
    {\par\noindent{\bf Доказательство.\par\nopagebreak}}%
    {\hfill$\scriptstyle\blacksquare$}

% Полезные команды для текста
\renewcommand{\em}{\it}  % чтобы \em и \emph всегда делали курсив
\renewcommand\emph[1]{\textit{#1}}
% перенос знака операции на следующую строку
\def\brop#1{#1\discretionary{}{\hbox{$#1$}}{}}

% Полезные команды для математики
\renewcommand{\geq}{\geqslant}
\renewcommand{\leq}{\leqslant}
\newcommand{\ophi}{\phi}
\renewcommand{\phi}{\varphi}
\newcommand{\const}{\mathrm{const}}
\newcommand{\emset}{\varnothing}
\newcommand{\eps}{\varepsilon}
\newcommand{\wtil}{\widetilde}
\newcommand{\kapa}{\varkappa}
\newcommand{\argmin}{\mathop{\rm arg\,min}\limits}
\newcommand{\argmax}{\mathop{\rm arg\,max}\limits}
\newcommand{\sign}{\mathop{\rm sign}\limits}
\newcommand{\T}{^{\text{\tiny\sffamily\upshape\mdseries T}}}

% готика
\def\RR{\mathbb{R}}
\def\DD{\mathbb{D}}
\def\fF{\mathfrak{F}}
\def\fI{\mathfrak{I}}
\def\fM{\mathfrak{M}}

% теория вероятностей
\newcommand{\erf}{\myop{erf}}
\newcommand{\Expect}{\mathsf{E}}
\newcommand{\Var}{\mathsf{D}}
\newcommand\Normal{\mathcal{N}}
\newcommand{\cond}{\mspace{3mu}{|}\mspace{3mu}}

% Рисование нейронных сетей и диаграмм
\newenvironment{network}%
    {\begin{xy}<0.9ex,0ex>:}%
    {\end{xy}}
\def\nnNode[#1](#2)#3{\POS(#2)*#3="#1"}
\def\nnLink[#1,#2]#3{\POS"#1"\ar #3 "#2"}

% Русификация оформления алгоритмов в пакетах algorithm, algorithmic
%\definecolor{KwColor}{rgb}{0,0,0.9}
%\newcommand{\algKeyword}[1]{\textbf{\color{KwColor} #1}}
\newcommand{\algKeyword}[1]{\textbf{#1}}
\renewcommand{\algorithmicrequire}{\rule{0pt}{2.5ex}\algKeyword{Вход:}}
\renewcommand{\algorithmicensure}{\algKeyword{Выход:}}
\renewcommand{\algorithmicend}{\algKeyword{конец}}
\renewcommand{\algorithmicif}{\algKeyword{если}}
\renewcommand{\algorithmicthen}{\algKeyword{то}}
\renewcommand{\algorithmicelse}{\algKeyword{иначе}}
\renewcommand{\algorithmicelsif}{\algorithmicelse\ \algorithmicif}
\renewcommand{\algorithmicendif}{\algorithmicend\ \algorithmicif}
\renewcommand{\algorithmicfor}{\algKeyword{для}}
\renewcommand{\algorithmicforall}{\algKeyword{для всех}}
\renewcommand{\algorithmicdo}{}
\renewcommand{\algorithmicendfor}{\algorithmicend\ \algorithmicfor}
\renewcommand{\algorithmicwhile}{\algKeyword{пока}}
\renewcommand{\algorithmicendwhile}{\algorithmicend\ \algorithmicwhile}
\renewcommand{\algorithmicloop}{\algKeyword{цикл}}
\renewcommand{\algorithmicendloop}{\algorithmicend\ \algorithmicloop}
\renewcommand{\algorithmicrepeat}{\algKeyword{повторять}}
\renewcommand{\algorithmicuntil}{\algKeyword{пока}}
%\renewcommand{\algorithmiccomment}[1]{{\footnotesize // #1}}
\renewcommand{\algorithmiccomment}[1]{{\quad--- #1}}
\renewcommand{\listalgorithmname}{Список алгоритмов}
% Мои дополнительные команды для описания алгоритмов
\newcommand{\BEGIN}{\\[1ex]\hrule\vskip 1ex}
\newcommand{\PARAMS}{\renewcommand{\algorithmicrequire}{\algKeyword{Параметры:}}\REQUIRE}
\newcommand{\END}{\vskip 1ex\hrule\vskip 1ex}
\newcommand{\vkReturn}{\algKeyword{вернуть} }
\newcommand{\RET}{\STATE\vkReturn}
\newcommand{\EXIT}{\STATE\algKeyword{выход}}
\newcommand{\CONTINUE}{\STATE\algKeyword{следующий} }
\newcommand{\IFTHEN}[1]{\STATE\algorithmicif\ #1 {\algorithmicthen}}
\newcommand{\vkProcedure}[1]{{\tt #1}}
\newcommand{\vkProc}[1]{\text{\tt #1}}
\newcommand{\PROCEDURE}[1]{\medskip\STATE\algKeyword{ПРОЦЕДУРА} \vkProcedure{#1}}
\floatname{algorithm}{Алгоритм}
\floatplacement{algorithm}{!t}
% чтобы поставить точечку после номера алгоритма в \caption:
\renewcommand\floatc@ruled[2]{\vskip2pt{\@fs@cfont #1.} #2\par}

% Переопределение колонтитулов
\def\MYheadfoot{
\renewcommand{\@oddfoot}{}
\renewcommand{\@oddhead}{\hfil-- \thepage\ --\hfil}
\renewcommand{\@evenfoot}{}
\renewcommand{\@evenhead}{\hfil-- \thepage\ --\hfil}
} \MYheadfoot

% Нумерацию формул переподчиним разделам
\@addtoreset{equation}{section}
\def\theequation{\thesection.\arabic{equation}}

% Стили параграфов
\renewcommand\section{\@startsection{section}{1}{\z@}%
    {3.5ex \@plus 1ex \@minus .2ex}%
    {2.3ex \@plus.2ex}%
    {\normalfont\Large\sffamily\bfseries}}
\renewcommand\subsection{\@startsection{subsection}{2}{\z@}%
    {3.25ex\@plus 1ex \@minus .2ex}%
    {1.5ex \@plus .2ex}%
    {\normalfont\large\sffamily\bfseries}}
\renewcommand\subsubsection{\@startsection{subsubsection}{3}{\z@}%
    {3.25ex\@plus 1ex \@minus .2ex}%
    {1.5ex \@plus .2ex}%
    {\normalfont\normalsize\sffamily\bfseries}}

% Плавающие иллюстрации  
\setcounter{topnumber}{9}
\setcounter{totalnumber}{9}
\renewcommand\topfraction{1.0}
\renewcommand\textfraction{0.0}  % чтобы иллюстрации не улетали в конец документа
\renewcommand\floatpagefraction{0.01} % float-страниц быть вообще не должно - это чтобы их лучше видеть ;)
\setlength\floatsep{2ex}
\setlength\textfloatsep{2.5ex}
\setlength\intextsep{2.5ex}
\setlength\abovecaptionskip{2ex}

% Нумерованный перечень со скобками
\def\afterlabel#1{\renewcommand\labelenumi{\theenumi #1}}
\def\aroundlabel#1#2{\renewcommand\labelenumi{#1\theenumi #2}}
\newenvironment{enumerate*}
{%
    \begingroup
    \renewcommand{\@listi}{%
        \topsep=\smallskipamount % вокруг списка
        \parsep=0pt% между абзацами внутри пункта
        \parskip=0pt% между абзацами
        \itemsep=0pt% между пунктами
        \itemindent=0pt% абзацный выступ
        \labelsep=1.5ex% расстояние до метки
        \leftmargin=24pt% отступ слева
        \rightmargin=0pt} % отступ справа
    \begin{enumerate}%
    \afterlabel)%
}{%
    \end{enumerate}%
    \endgroup
}

% Для таблиц: невидимая вертикальная линейка немного расширяет заголовок
\newcommand{\hstrut}{\rule{0pt}{2.5ex}}
\newcommand{\headline}{\hline\hstrut}
